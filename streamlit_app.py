from pydoc_data.topics import topics
import streamlit as st
from streamlit_option_menu import option_menu
import pandas as pd
import numpy as np
import plotly.express as px
import plotly.graph_objects as go
from PIL import Image

st.set_page_config(
    page_title="ê¸°í›„ë³€í™” ê´€ë ¨ ì…ë²•ë¶€ ëŒ€ì‘ í˜„í™© ë¶„ì„",
    page_icon="ğŸ›ï¸",
    layout="wide",
    initial_sidebar_state="expanded",
    menu_items={
        'Get Help': 'https://www.extremelycoolapp.com/help',
        'Report a bug': "https://www.extremelycoolapp.com/bug",
        'About': '2022ë…„ 2í•™ê¸° ë°ì´í„°ì €ë„ë¦¬ì¦˜ ìˆ˜ì—… 1ì¡° ìµœì¢… ê³¼ì œ ê²°ê³¼ë¬¼ì…ë‹ˆë‹¤.',
    }
)

with open('./css/style.css') as f:
    st.markdown(f"<style>{f.read()}</style>", unsafe_allow_html=True)
@st.experimental_memo
def load_data(file_name):
  df = pd.read_csv(file_name)
  return df

def load_image(image_file) :
    img = Image.open(image_file)
    return(img)

st.title('ê¸°í›„ë³€í™”ì— ëŒ€í•´ ì…ë²•ë¶€ëŠ” ì–´ë–»ê²Œ ëŒ€ì‘í•´ì™”ëŠ”ê°€?')
st.markdown('---')
#law_total = load_data('https://docs.google.com/spreadsheets/d/e/2PACX-1vT6AFAcm5mv-htTPaHUlEOmTLkSoRwRGbWfvKJpB02LwPg3Q3bZ9TRAOIuGPB8LW37UVLUl_yNg3SeK/pub?gid=1079941894&single=true&output=csv')
hwang_ex = load_data('https://docs.google.com/spreadsheets/d/e/2PACX-1vT6AFAcm5mv-htTPaHUlEOmTLkSoRwRGbWfvKJpB02LwPg3Q3bZ9TRAOIuGPB8LW37UVLUl_yNg3SeK/pub?gid=1266754791&single=true&output=csv')
topic_intro = load_data('https://docs.google.com/spreadsheets/d/e/2PACX-1vTBLls-7iUW19oceb2F-zuuMaR1jcOow7OiSEeVMA5yBy2PzGtAkW876AOBUFEAolV3GZ6iQI5TICuM/pub?gid=0&single=true&output=csv')
topic_rank = load_data('https://docs.google.com/spreadsheets/d/e/2PACX-1vT6AFAcm5mv-htTPaHUlEOmTLkSoRwRGbWfvKJpB02LwPg3Q3bZ9TRAOIuGPB8LW37UVLUl_yNg3SeK/pub?gid=456523749&single=true&output=csv')
yy = load_data('https://docs.google.com/spreadsheets/d/e/2PACX-1vSoAYOiuIHUBXvfQ6xf8yBeinK-zWmGlGtVWXb336K47Q28Ke_mjwM6V2wFaHVaZvJnt6_KrkLnpRim/pub?gid=0&single=true&output=csv')
df = load_data('./data/conference_total.csv')
clstr = load_data("https://docs.google.com/spreadsheets/d/e/2PACX-1vSyoeLyhung7IUTPARDqxlb_pf3XpytIksylGeySIQfagQQRTxuUJvRrMmjhhL_zHJvkBwbYu_yI8_s/pub?gid=889562349&single=true&output=csv")
wc1 = load_image('./img/ë…¸ë¬´í˜„green10.png')
wc2 = load_image('./img/ì´ëª…ë°•green10-1.png')
wc3 = load_image('./img/ë°•ê·¼í˜œgreen10-1.png')
wc4 = load_image('./img/ë¬¸ì¬ì¸green10.png')

with st.sidebar:
    #a = st.selectbox('ì¹´í…Œê³ ë¦¬', ('ì†Œê°œ','êµ¬ê¸€/íŠ¸ìœ„í„° ì¸ê¸° ê²€ìƒ‰ í‚¤ì›Œë“œ','ì˜¨ë¼ì¸ ì»¤ë®¤ë‹ˆí‹° ì¸ê¸° ê²Œì‹œë¬¼', 'ì˜¤ëŠ˜ì˜ ì£¼ìš” í‚¤ì›Œë“œ ë­í‚¹'))
    a = option_menu('ì¹´í…Œê³ ë¦¬', ['ì†Œê°œ','1. ê¸°í›„ë³€í™” ê´€ë ¨ ë²•ì•ˆ, ëˆ„ê°€ ë§ì´ ë°œì˜í–ˆë‚˜','2. ì „ê¸°ìë™ì°¨ë¶€í„° íƒ„ì†Œ ë°°ì¶œëŸ‰ ê°ì¶•ê¹Œì§€','3. íšŒì˜ë¡ ë¶„ì„'],styles={"nav-link-selected": {"background-color": "#1C261F"}})
    st.markdown('---')
    st.markdown(
        '''
            <style>
                .css-1adrfps.e1fqkh3o2 {
                    width: 400px;
                }
                .css-1wf22gv.e1fqkh3o2 {
                    width: 400px;
                    margin-left: -400px;
                }
            </style>
        ''',
        unsafe_allow_html=True
    )

if a == 'ì†Œê°œ':
  st.header('í”„ë¡œì íŠ¸ ì‹œì‘ ë™ê¸°')

  st.header('ì´ë ‡ê²Œ ìˆ˜ì§‘í–ˆì–´ìš”')
  st.markdown('''
  - ë°œì˜ì•ˆ ë°ì´í„° ìˆ˜ì§‘ ë°©ë²•:
    1. ì˜ì•ˆì •ë³´ì‹œìŠ¤í…œ - **ì œì•ˆì´ìœ  ê²€ìƒ‰ ê²°ê³¼**ë¡œ 1ì°¨ BillId í¬ë¡¤ë§
    2. ì˜ì•ˆì •ë³´ì‹œìŠ¤í…œ - BillIdë¡œ ì œì•ˆì´ìœ  2ì°¨ í¬ë¡¤ë§ - ì˜ì•ˆ ì •ë³´
    3. êµ­íšŒì˜ì› ë°œì˜ë²•ë¥ ì•ˆ API -  ê¸°íƒ€ meta data 3ì°¨ í¬ë¡¤ë§
  ''')
  st.header('ì´ë ‡ê²Œ ë¶„ì„í–ˆì–´ìš”')
  st.markdown('''
  ë°œì˜ì•ˆì— ëŒ€í•´ì„œëŠ” BERTopicì„ í™œìš©í•´ í† í”½ ë¶„ì„ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. Sentence Transformerë¡œ
  ì„ë² ë”© í›„, UMAPìœ¼ë¡œ ì°¨ì› ì¶•ì†Œ í›„, HDBSCANì„ í™œìš©í•´ í´ëŸ¬ìŠ¤í„°ë§í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. íšŒì˜ë¡ì— ëŒ€í•´ì„œëŠ” ìœ„ì™€ ê°™ì€
  ë°©ë²•ì„ ìˆ˜í–‰í•œ í›„, ì„ë² ë”© ë²¡í„°ê°’ì„ í™œìš©í•´ ì½”ì‚¬ì¸ ìœ ì‚¬ë„ë¥¼ ê³„ì‚°í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, ë°œì–¸ì˜ ê°œë³„ í‚¤ì›Œë“œë¥¼ ì¶”ì¶œí•˜ê¸° ìœ„í•´ KeyBERTë¥¼
  í™œìš©í–ˆìŠµë‹ˆë‹¤. KeyBERTëŠ” í‚¤ì›Œë“œ ì„ë² ë”©ê³¼ ë¬¸ì„œ ì„ë² ë”©ì„ ë”°ë¡œ ê³„ì‚° í›„ ë‘˜ ì‚¬ì´ ì½”ì‚¬ì¸ ìœ ì‚¬ì„±ì„ ê³„ì‚°í•´ í•´ë‹¹ ì ìˆ˜ê°€ ê°€ì¥ ë†’ì€
  í‚¤ì›Œë“œ, ì¦‰ ìœ ì‚¬í•œ í‚¤ì›Œë“œë¥¼ ì¶”ì¶œí•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.
  ''')

if a == '1. ê¸°í›„ë³€í™” ê´€ë ¨ ë²•ì•ˆ, ëˆ„ê°€ ë§ì´ ë°œì˜í–ˆë‚˜':
  st.header('ê¸°í›„ë³€í™” ê´€ë ¨ ë²•ì•ˆ, ëˆ„ê°€ ë§ì´ ë°œì˜í–ˆë‚˜')
  st.markdown('''
  êµ­íšŒëŠ” ê¸°í›„ë³€í™”ì™€ ê´€ë ¨í•´ ì–´ë– í•œ ë²•ì„ ì œì •í•˜ê¸° ìœ„í•´ ë…¸ë ¥í–ˆì„ê¹Œìš”? ì´ë¥¼ ì•Œì•„ë³´ê¸° ìœ„í•´, ë…¸ë¬´í˜„ ì •ê¶Œë¶€í„° ë¬¸ì¬ì¸ ì •ê¶Œ ë‚´ì— ë°œì˜ëœ ë²•ì•ˆ 905ê°œë¥¼ ëª¨ì•„ ë¶„ì„í–ˆìŠµë‹ˆë‹¤. 
  ''')
  st.subheader('ë…¹ìƒ‰ì„±ì¥, íƒ„ì†Œì¤‘ë¦½ â€¦ ì •ê¶Œë³„ ë°œì˜ê±´ìˆ˜ íŒ¨í„´ì€ ì •ê¶Œì˜ ê¸°ì¡°ì™€ ì§ê²°ëë‹¤')
  st.markdown('''
  ë°œì˜ê±´ìˆ˜ë¥¼ ì •ê¶Œë³„ë¡œ í™•ì¸í•œ ê²°ê³¼, **ë¬¸ì¬ì¸ ì •ê¶Œ 510ê±´, ì´ëª…ë°• ì •ê¶Œ 200ê±´, ë°•ê·¼í˜œ ì •ê¶Œ 152ê±´, ë…¸ë¬´í˜„ ì •ê¶Œ 29ê±´ ìˆœ**ìœ¼ë¡œ ë°œì˜ ê±´ìˆ˜ê°€ ë†’ì•˜ìŠµë‹ˆë‹¤. ì´ëŠ” **ë¬¸ì¬ì¸ ì •ê¶Œì˜ â€˜íƒ„ì†Œì¤‘ë¦½â€™, ì´ëª…ë°• ì •ê¶Œì˜ â€˜ë…¹ìƒ‰ì„±ì¥â€™ ê¸°ì¡°ê°€ ë°˜ì˜ëœ ê²°ê³¼**ë¼ê³  í•´ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \n\n
  ''')
  yy['age'] = [16,16,20,20,18,18,17,17]
  yy = yy.sort_values(by='age')

  fig00 = px.histogram(yy, x="pres", y="sum",
              color='yeoya', barmode='group',
              height=400).update_layout(xaxis_title="ì •ê¶Œ", yaxis_title="ì •ê¶Œë³„ ë°œì˜ê±´ìˆ˜", 
                                        yaxis = dict(
                                            tickmode = 'linear',
                                            tick0 = 0,
                                            dtick = 100
      ))
  st.plotly_chart(fig00, use_container_width=True)
  st.markdown('''
  í¥ë¯¸ë¡œìš´ ê²ƒì€ ì •ê¶Œë³„ ì—¬ë‹¹ ì•¼ë‹¹ì˜ ë°œì˜ê±´ìˆ˜ íŒ¨í„´ì…ë‹ˆë‹¤. **ë°•ê·¼í˜œ ì •ê¶Œì„ ì œì™¸í•˜ê³ ëŠ”, ì—¬ë‹¹ì´ ê¸°í›„ë³€í™”ì— ëŒ€í•œ ë²•ì  ë…¼ì˜ë¥¼ ê²¬ì¸í•œ ê²ƒ**ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ, ì§„ë³´ ì„±í–¥ì˜ ì •ë‹¹ì´ ê¸°í›„ë³€í™” ê´€ë ¨ ë²•ì•ˆì„ ë§ì´ ë°œì˜í•  ê²ƒì´ë¼ëŠ” í†µë…ê³¼ ë‹¬ë¦¬, ì´ëª…ë°• ì •ë¶€ì—ì„œëŠ” ì—¬ë‹¹ì´ì—ˆë˜ í•œë‚˜ë¼ë‹¹(79ê±´)ê³¼ ìƒˆëˆ„ë¦¬ë‹¹(32ê±´)ì´ ë§ì€ ë²•ì•ˆì„ ë°œì˜í–ˆìŠµë‹ˆë‹¤.  ì¦‰, êµ­íšŒê°€ ë…ë¦½ì ìœ¼ë¡œ ê¸°í›„ë³€í™”ì— ëŒ€í•œ ë…¼ì˜ë¥¼ ì „ê°œí•˜ê¸°ë³´ë‹¤ëŠ”, ì •ë¶€ì˜ ì •ì±…ê¸°ì¡°ë¥¼ ë”°ë¼ê°€ëŠ” íŒ¨í„´ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤. ë°•ê·¼í˜œ ì •ê¶Œì˜ ê²½ìš°, [ì´ëª…ë°• ì •ë¶€ì—ì„œ ì¶”ì§„ë˜ì—ˆë˜ ë…¹ìƒ‰ì„±ì¥ ì •ì±…ì„ ì§€ìš°ë ¤í•œ]([https://www.pressian.com/pages/articles/64964](https://www.pressian.com/pages/articles/64964)) ê²ƒê³¼ ì—°ê´€ì´ ìˆë‹¤ê³  í•´ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ, [ë°•ê·¼í˜œ ì •ë¶€ì˜ í™˜ê²½Â·ì—ë„ˆì§€ ì •ì±…ì€ í•™ê³„ì™€ ì‹œë¯¼ì‚¬íšŒë‹¨ì²´ ì „ë¬¸ê°€ í‰ê°€ì—ì„œ 5ì  ë§Œì ì— 1.48ì ì˜ ë‚™ì œì ]([https://www.hani.co.kr/arti/society/environment/783696.html](https://www.hani.co.kr/arti/society/environment/783696.html))ì„ ë°›ì•˜ìœ¼ë©°, ë…¹ìƒ‰ì„±ì¥ìœ„ì›íšŒëŠ” ëŒ€í†µë ¹ ì†Œì†ì—ì„œ êµ­ë¬´ì´ë¦¬ ì‚°í•˜ë¡œ ìœ„ìƒì´ ê²©í•˜ë˜ì—ˆìŠµë‹ˆë‹¤. ë¬¸ì¬ì¸ ì •ê¶Œì—ì„œëŠ” ì§„ë³´ì„±í–¥ì˜ ì—¬ë‹¹ì¸ ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹ì´ 315ê±´ìœ¼ë¡œ, ë’¤ë¥¼ ì‡ëŠ” êµ­ë¯¼ì˜í˜(65ê±´), ìƒˆëˆ„ë¦¬ë‹¹(54ê±´)ì— ë¹„í•´ ì••ë„ì ìœ¼ë¡œ ë§ì€ ë°œì˜ë¥¼ í–ˆìŠµë‹ˆë‹¤.
  ''')

  st.subheader('ë°œì˜ë¥¼ ë§ì´í•œ ì˜ì›ì´ ê¸°í›„ë³€í™”ì— ë§ì€ ê´€ì‹¬? ë°œì˜ ë‚´ìš©ì´ ì¤‘ìš”')
  st.markdown('''
  ìš°ë¦¬ëŠ” í”íˆ ê¸°í›„ë³€í™”ì— ê´€ì‹¬ì„ ë§ì´ ê°€ì§€ëŠ” ì˜ì›ì´ ë§ì´ ë°œì˜í•  ê²ƒì„ ê¸°ëŒ€í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë¶„ì„ ê²°ê³¼, ë°œì˜ëŸ‰ì´ ê¸°í›„ë³€í™” ê´€ì‹¬ë„ì˜ ë°”ë¡œë¯¸í„°ë¼ê³  ë³´ê¸° ì–´ë µë‹¤ëŠ” í•´ì„ì´ ë‚˜ì™”ìŠµë‹ˆë‹¤. êµ­íšŒ ëŒ€ìˆ˜ë³„ë¡œ ë°œì˜ë¥¼ ë§ì´í•œ ì˜ì›ì„ í™•ì¸í•œ ê²°ê³¼, 19ëŒ€ ê¹€ë™ì²  ì˜ì›(ë¯¼ì£¼í†µí•©ë‹¹), 20ëŒ€ í™©ì£¼í™ ì˜ì›(êµ­ë¯¼ì˜ë‹¹) ê·¸ë¦¬ê³  21ëŒ€ í—ˆì˜ ì˜ì›(ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹)ì´ ê°ê° 8ê±´, 20ê±´, 13ê±´ìœ¼ë¡œ ê°€ì¥ ë§ì´ ë°œì˜í–ˆìŠµë‹ˆë‹¤. \n\n
  ''')
  st.dataframe(hwang_ex)
  st.text('21ëŒ€ í™©ì£¼í™ì˜ì›ì˜ ë°œì˜ì•ˆ. ì£¼ìš” ì œì•ˆì´ìœ  ì…€ì„ ë”ë¸”í´ë¦­í•˜ë©´ ë‚´ìš© ì „ì²´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.')
  st.markdown('')

  st.markdown('''
  ê·¸ëŸ¬ë‚˜ ë°œì˜ì•ˆì„ ì‹¤ì œë¡œ ì‚´í´ë³¸ ê²°ê³¼, **ê¹€ë™ì²  ì˜ì›ê³¼ í™©ì£¼í™ ì˜ì›ì˜ ë§ì€ ë°œì˜ì•ˆì€ í•˜ë‚˜ì˜ ì£¼ì œ**ë§Œì„ ê°€ë¦¬í‚¤ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ê¹€ë™ì²  ì˜ì›ì€ ì „ê¸°ìë™ì°¨ ê´€ë ¨ ì„¸ê¸ˆ ë° í†µí–‰ë£Œ ê°ë©´ì´ í•„ìš”í•˜ë‹¤ëŠ” ë§¥ë½ì—ì„œ ì—¬ëŸ¬ ë²•ë¥ ì•ˆì„ ë°œì˜í–ˆìŠµë‹ˆë‹¤. í™©ì£¼í™ ì˜ì›ì€ ë†ì–´ì´Œì§€ì—­ì˜ ê¸°í›„ë³€í™”ë¡œ ì¸í•œ ë†ì‘ë¬¼ ì‘í™© ë¶€ì§„ì„ ê³ ë ¤í•´ ì¡°ì„¸íŠ¹ë¡€ë¥¼ ì§€ì†í•´ì•¼í•œë‹¤ëŠ” ë§¥ë½ì—ì„œ ì¡°ì„¸íŠ¹ë¡€ì œí•œë²• ì¼ë¶€ê°œì •ë²•ë¥ ì•ˆ ë“±ì„ ì—¬ëŸ¬ ì°¨ë¡€ ë°œì˜í–ˆìŠµë‹ˆë‹¤. í—ˆì˜ ì˜ì›ì˜ ê²½ìš°, ë…¼ì˜ì˜ ê²°ì´ ì¡°ê¸ˆ ë‹¬ë¼ì§‘ë‹ˆë‹¤. ê¸°í›„ë³€í™”ì¸ì§€ ì˜ˆÂ·ê²°ì‚°ì œë„ ê´€ë ¨ ë²•ì•ˆì„ ë§ì´ ë°œì˜í•˜ì˜€ì§€ë§Œ, ê·¸ë¦°ë¦¬ëª¨ë¸ë§ ì‚¬ì—…, êµ­ê°€ì •ì› í™•ì¶© ë“±ì˜ ì˜¨ì‹¤ê°€ìŠ¤ ê°ì¶•ê³¼ ê´€ë ¨ëœ ë²•ì•ˆ ì—­ì‹œ ë§ì´ ë°œì˜í•˜ì˜€ë‹¤ëŠ” ì ì—ì„œ ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤. \n\n
  ì´ì™¸ì—ë„ ë°œì˜ì•ˆ ì†Œê´€ ìƒì„ìœ„ì›íšŒë³„ ë°œì˜ê±´ìˆ˜ë¥¼ í™•ì¸í•œ ê²°ê³¼,  í™˜ê²½ë…¸ë™ìœ„ì›íšŒ(181ê±´), êµ­í† êµí†µìœ„ì›íšŒ (101ê±´), ê¸°íšì¬ì •ìœ„ì›íšŒ(99ê±´)ê°€ ìƒìœ„ ê²°ê³¼ì— ì†í–ˆìŠµë‹ˆë‹¤. 
  ''')
  st.subheader('ëŒ€ë¶€ë¶„ì˜ ë²•ì•ˆ ê³„ë¥˜ -> íê¸°ì˜ ìˆ˜ìˆœì„ ê±°ì³, ë‹¤ë§Œ 21ëŒ€ êµ­íšŒ ë³¸íšŒì˜ ìƒì • ì•ˆê±´ ì¦ê°€')

if a == '2. ì „ê¸°ìë™ì°¨ë¶€í„° íƒ„ì†Œ ë°°ì¶œëŸ‰ ê°ì¶•ê¹Œì§€':
  st.header('2. ì „ê¸°ìë™ì°¨ë¶€í„° íƒ„ì†Œ ë°°ì¶œëŸ‰ ê°ì¶•ê¹Œì§€')
  st.markdown('''
  ì§€ë‚œ ì±•í„°ê¹Œì§€ ë°œì˜ê±´ìˆ˜ì— ì§‘ì¤‘ì— ì‚´í´ë³´ì•˜ë‹¤ë©´, ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ ì–´ë–¤ ë‚´ìš©ì˜ ë°œì˜ì•ˆì´ ë§ì´ ë‚˜ì™”ë‚˜ ì‚´í´ë³´ë ¤í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì˜ì•ˆë³„ â€˜ì œì•ˆì´ìœ  ë° ì£¼ìš”ë‚´ìš©â€™ì„ Sentence transformerì„ í™œìš©í•´ ì„ë² ë”©í•˜ì—¬ ê±°ë¦¬ê°€ ê°€ê¹Œìš´ ë°œì–¸ë“¤ë¼ë¦¬ í´ëŸ¬ìŠ¤í„°ë¡œ ë¬¶ì–´ì£¼ì—ˆìŠµë‹ˆë‹¤. í† í”½ í´ëŸ¬ìŠ¤í„°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
  ''')
  st.dataframe(topic_intro)
  st.markdown('''
  ë¬¸ì¬ì¸ ì •ê¶Œ ë•Œ ì••ë„ì ìœ¼ë¡œ ë°œì˜ì•ˆ ìˆ˜ê°€ ë§ì•˜ê¸° ë•Œë¬¸ì—, ëŒ€ë¶€ë¶„ì˜ ì£¼ì œë“¤ì´ ë°•ê·¼í˜œ ì •ê¶Œ ë•Œ ì†Œí­ ê°ì†Œí•˜ê³  ë¬¸ì¬ì¸ ì •ê¶Œ ë•Œ í° í­ì˜ ìƒìŠ¹ì„ ë³´ì˜€ìŠµë‹ˆë‹¤. (ë…¸ë¬´í˜„ ì •ê¶Œ ë°œì˜ì•ˆì´ 29ê±´ìœ¼ë¡œ ë‹¤ë¥¸ ì •ê¶Œì— ë¹„í•´ í˜„ì €íˆ ì ê¸° ë•Œë¬¸ì—, ì´ë²ˆ ë¶„ì„ì—ì„œëŠ” ì œì™¸í•©ë‹ˆë‹¤.) ì£¼ì œ í´ëŸ¬ìŠ¤í„°ë³„ë¡œ, ë°œì˜ ì¶”ì´ë¥¼ ì‚´í´ë³¸ ê²°ê³¼ ëª‡ê°€ì§€ í¥ë¯¸ë¡œìš´ ê²°ê³¼ë¥¼ ì°¾ì•„ë³¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. 
  ''')

  st.subheader('í­ì—¼, í­ìš°, ê°€ë­„ â€¦ ëª¨ë“  ì •ê¶Œì´ ë²•ì  ëŒ€ì±…ì„ ê³ ë¯¼í•´')
  topic_rank_1 = topic_rank[(topic_rank['content_topic'] == 2) | (topic_rank['content_topic'] == 3)]
  fig_rank_1 = px.line(topic_rank_1,x='pres',y='count',facet_col='content_topic', facet_col_wrap=2, markers=True,width=900)
  fig_rank_1.update_layout(font_family="Pretendard",xaxis_title='ë°œì˜ê±´ìˆ˜', yaxis_title='',margin_pad=10)
  fig_rank_1.for_each_annotation(lambda a: a.update(text=a.text.split("=")[-1]))
  st.plotly_chart(fig_rank_1)
  st.markdown('''
  ê° ì •ê¶Œ ìƒìœ„ê¶Œ í† í”½(3ìœ„ ì´ë‚´)ì— 2ë²ˆ ì´ìƒ ë­í‚¹ëœ ì£¼ì œë¥¼ ë¶„ì„í•œ ê²°ê³¼, í­ìš°, ê°€ë­„ í”¼í•´ ëŒ€ì±… ê´€ë ¨ ì˜ì•ˆ(2ë²ˆ)ì´  ë°•ê·¼í˜œ ì •ê¶Œì—ì„œ 3ìœ„, ì´ëª…ë°• ì •ê¶Œì—ì„œ 2ìœ„ë¥¼ ì°¨ì§€í•˜ì˜€ê³ , í­ì—¼ ëŒ€ì±… ê´€ë ¨ ì˜ì•ˆ(3ë²ˆ)ì´ ê°ê°ì´ëª…ë°• ì •ê¶Œì—ì„œ 3ìœ„, ë¬¸ì¬ì¸ ì •ê¶Œì—ì„œ 3ìœ„ë¥¼ ì°¨ì§€í•œ ê²ƒì„ ë°í˜€ëƒˆìŠµë‹ˆë‹¤. ì¦‰, í­ì—¼ ê·¸ë¦¬ê³  í­ìš°, ê°€ë­„ì— ëŒ€í•´ ëª¨ë“  ì •ê¶Œì´ ë²•ì ì¸ ì˜ˆë°© ë‚´ì§€ í•´ê²°ì±…ì„ ë„ëª¨í•˜ì˜€ë‹¤ê³  í•´ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ, ë¬¸ì¬ì¸ ì •ê¶Œì—ì„œëŠ” 3ë²ˆ ì£¼ì œ í´ëŸ¬ìŠ¤í„°ì— ê¸°í›„ë³´ê±´ê±´ê°•ì˜í–¥í‰ê°€, ê¸°í›„ë³€í™” ì¸ì§€ ì˜ˆê²°ì‚° ì œë„ ê´€ë ¨ ë²•ì•ˆ ë°œì˜ê°€ ì¶”ê°€ëœ ê²ƒì´ íŠ¹ì§•ì…ë‹ˆë‹¤. 
  ''')


  st.subheader('ì´ëª…ë°• ì •ë¶€ ë‹¹ì‹œ êµ­íšŒì˜ í•µì‹¬ ë…¼ì˜ëŠ” ì¹œí™˜ê²½ êµí†µ ìˆ˜ë‹¨ ì¤‘ì‹¬')
  topic_rank_2 = topic_rank[(topic_rank['content_topic'] == 1) | (topic_rank['content_topic'] == 6)| (topic_rank['content_topic'] == 10)]
  fig_rank_2 = px.line(topic_rank_2,x='pres',y='count',facet_col='content_topic', facet_col_wrap=3, markers=True,width=900)
  fig_rank_2.update_layout(font_family="Pretendard",xaxis_title='ë°œì˜ê±´ìˆ˜', yaxis_title='',margin_pad=10)
  fig_rank_2.for_each_annotation(lambda a: a.update(text=a.text.split("=")[-1]))
  st.plotly_chart(fig_rank_2)
  st.markdown('''
  ì´ëª…ë°• ì •ê¶Œì€ â€˜ë…¹ìƒ‰ì„±ì¥â€™ì„ í•µì‹¬ ì •ì±…ìœ¼ë¡œ ë‚´ì„¸ìš´ ì •ë¶€ì´ê¸° ë•Œë¬¸ì—, íŠ¹íˆ ì£¼ëª©í•´ì„œ ë³¼ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ì´ëª…ë°• ì •ë¶€ì—ì„œ ë°œì˜í•œ ê¸°í›„ë³€í™” ë°œì˜ì•ˆ ì¤‘, ê°€ì¥ ë§ì€ ì£¼ì œë¥¼ ì°¨ì§€í•œ ê²ƒì€ â€˜ì „ê¸°ìë™ì°¨â€™(1ë²ˆ)ì˜€ìŠµë‹ˆë‹¤. í•´ë‹¹ ì •ê¶Œ ë•Œ íŠ¹íˆ í•˜ì´ë¸Œë¦¬ë“œ ì°¨ëŸ‰, ì „ê¸°ìë™ì°¨ ê´€ë ¨ ë²•ì•ˆì„ ë§ˆë ¨í•˜ê³ ì í•˜ëŠ” ì›€ì§ì„ì´ ì»¸ìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ ì´ëª…ë°• ì •ë¶€ëŠ” [ì²­ì™€ëŒ€ì—ì„œ ì „ê¸°ìë™ì°¨ ì‹œìŠ¹ì„ ì§„í–‰](https://www.ytn.co.kr/_ln/0101_201009091604133712)í•˜ëŠ” ë“± ì „ê¸°ìë™ì°¨ì— ëŒ€í•œ í° ê´€ì‹¬ì„ ë³´ì˜€ìŠµë‹ˆë‹¤. ë°•ê·¼í˜œ ì •ë¶€ì—ì„œ ê´€ë ¨ ì˜ì•ˆ ë°œì˜ê°€ ê°ì†Œí•œ í›„, ë¬¸ì¬ì¸ ì •ê¶Œ ë•Œ ë‹¤ì‹œ ì¦ê°€í•´ 4ìœ„ í† í”½ìœ¼ë¡œ ë¶€ìƒí–ˆìŠµë‹ˆë‹¤. ì´ì–´, ì´ëª…ë°• ì •ê¶Œì—ì„œ ê´€ì‹¬ì„ ê°€ì§„ ì£¼ì œëŠ” â€˜ì‚°ë¦¼ ë³´í˜¸ ë° ì„ì—… ì§€ì›â€™ìœ¼ë¡œ, ê´€ë ¨í•˜ì—¬ 21ê±´ì˜ ë²•ë¥ ì•ˆì´ ë°œì˜ë˜ì—ˆìŠµë‹ˆë‹¤. 
  ''')
  st.markdown('''
  ì´ëª…ë°• ì •ê¶Œ ì´í›„ ê¾¸ì¤€íˆ ê°ì†Œí•œ ì£¼ì œë„ ìˆì—ˆìŠµë‹ˆë‹¤. ë°”ë¡œ 10ë²ˆ, ì €íƒ„ì†Œ ì¹œí™˜ê²½ ëŒ€ì¤‘ êµí†µ ìˆ˜ë‹¨ì„ ë‹¤ë£¬ ë²•ì•ˆ í´ëŸ¬ìŠ¤í„°ì˜€ìŠµë‹ˆë‹¤. ì €íƒ„ì†Œ ë…¹ìƒ‰ì„±ì¥ì˜ êµí†µìˆ˜ë‹¨Â â€˜ë…¸ë©´ì „ì°¨â€™ë¥¼ ë„ì…í•˜ìëŠ” ëª©ì†Œë¦¬ì™€ ìì „ê±° ì´ìš© ë° ìì „ê±° ì‚°ì—…ì„ í™œì„±í™”í•˜ìëŠ” ì›€ì§ì„ê³¼ ë§ë¬¼ë ¤ ë“±ì¥í–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ, [ìì „ê±° ë„ë¡œëŠ” ì´ëª…ë°• ì •ë¶€ì˜ í•µì‹¬ ì‚¬ì—…ì´ì—ˆë˜ ë§Œí¼](https://www.hankyung.com/society/article/2017052271297) ì •ë¶€ì˜ í•µì‹¬ ì‚¬ì—…ì´ ë²•ì•ˆ ë°œì˜ì— í° ì˜í–¥ì„ ì£¼ì—ˆìŒì„ ì‹œì‚¬í•©ë‹ˆë‹¤. 
  ''')

  st.subheader('íƒ„ì†Œ ë°°ì¶œëŸ‰ ê°ì¶•, ë¬¸ì¬ì¸ ì •ë¶€ ë“¤ì–´ ë³¸ê²© ë…¼ì˜ ì‹œì‘')
  topic_rank_3 = topic_rank[(topic_rank['content_topic'] == 0) | (topic_rank['content_topic'] == 4)| (topic_rank['content_topic'] == 13)| (topic_rank['content_topic'] == 15) | (topic_rank['content_topic'] == 16)]
  fig_rank_3 = px.line(topic_rank_3,x='pres',y='count',facet_col='content_topic', facet_col_wrap=3, markers=True,width=900,height=600)
  fig_rank_3.update_layout(font_family="Pretendard",xaxis_title='ë°œì˜ê±´ìˆ˜', yaxis_title='',margin_pad=10)
  fig_rank_3.for_each_annotation(lambda a: a.update(text=a.text.split("=")[-1]))
  st.plotly_chart(fig_rank_3)
  st.markdown('''
  ë¬¸ì¬ì¸ ì •ë¶€ ë“¤ì–´ ê¸°í›„ë³€í™” ê´€ë ¨ ë°œì˜ê°€ ëŒ€í­ ì¦ê°€í•œ ê²ƒì€ ì‚¬ì‹¤ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, íŠ¹íˆ ì „ ì •ê¶Œ ëŒ€ë¹„ ìƒˆë¡œ ë“±ì¥í•œ í† í”½, ë˜ëŠ” ì¦ê°€ìœ¨ì´ ë†’ì€ ì£¼ì œì˜ ì˜ì•ˆì—ëŠ” ë¬´ì—‡ì´ ìˆì„ê¹Œìš”? ì´ë¥¼ ì•Œì•„ë³´ê¸° ìœ„í•´, ë°•ê·¼í˜œ ì •ê¶Œ ëŒ€ë¹„ ì¦ê°€ìœ¨ 500% ì´ìƒì¸ ë™ì‹œì— ì´ëª…ë°• ì •ê¶Œ ëŒ€ë¹„ ì¦ê°€ìœ¨ 100% ì´ìƒì¸ ì£¼ì œë¥¼ ì¶”ë ¤ë³´ì•˜ìŠµë‹ˆë‹¤. 
  ''')
  st.markdown('''
  ìš°ì„  ì˜¨ì‹¤ê°€ìŠ¤ ê°ì¶•ì„ ë‹¤ë£¬ ì˜ì•ˆë“¤(0ë²ˆ)ì´ ì••ë„ì ìœ¼ë¡œ ë§ì´ ì¦ê°€í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì „ ì •ê¶Œì—ì„œ, 2ê±´ â†’ 7ê±´ â†’ 9ê±´ì— ë¨¸ë¬¼ë €ë˜ ì˜ì•ˆ ìˆ˜ëŠ” ë¬¸ì¬ì¸ ì •ë¶€ì—ì„œ 57ê±´ìœ¼ë¡œ í° ìƒìŠ¹í­ì„ ê·¸ë¦¬ë©° ë¬¸ì •ë¶€ ì „ì²´ ê¸°í›„ë³€í™” ì˜ì•ˆ ì£¼ì œ ì¤‘ 1ìœ„ë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤. ì¦‰, ì˜¨ì‹¤ê°€ìŠ¤, íŠ¹íˆ íƒ„ì†Œ ë°°ì¶œ ì €ê°ì— ëŒ€í•œ ë³¸ê²©ì ì¸ ë²•ì  ë…¼ì˜ê°€ ì§„í–‰ë˜ì—ˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”ë¶ˆì–´, ë¬¸ì •ë¶€ì—ì„œ ê°•ì¡°í•œ â€˜íƒ„ì†Œì¤‘ë¦½â€™ê³¼ë„ í° ì—°ê´€ì´ ìˆì–´ë³´ì…ë‹ˆë‹¤. ì´ì²˜ëŸ¼ ì •ë¶€ì˜ ì •ì±…ê³¼ ì—°ê´€ì´ ìˆëŠ” í† í”½ í´ëŸ¬ìŠ¤í„°ë¥¼ ë” í™•ì¸í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìˆ˜ì†Œê²½ì œ ê´€ë ¨ ì˜ì•ˆ(21ê±´, 15ë²ˆ)ê³¼ íƒ„ì†Œì¤‘ë¦½ì— ë”°ë¥¸ ì¼ìë¦¬ ì „í™˜ ëŒ€ì‘ ê´€ë ¨ ì˜ì•ˆ(20ê±´, 16ë²ˆ)ì€ ì „ ì •ê¶Œì—ì„œ ë“±ì¥í•˜ì§€ ì•Šì•˜ë˜, í˜¹ì€ 1ê±´ ì´í•˜ë¡œ ë“±ì¥í–ˆë˜ ì£¼ì œì…ë‹ˆë‹¤. ì´ëŠ” ë¬¸ì •ë¶€ê°€ ìˆ˜ì†Œê²½ì œì™€ ê·¸ë¦° ë‰´ë”œ ì‚¬ì—…ì„ ê°•ì¡°í–ˆë˜ ê²ƒì˜ ì—°ì¥ì„ ì´ë¼ê³  ë³´ì—¬ì§‘ë‹ˆë‹¤.  
  ''')
  st.markdown('''
  ì‹ ì¬ìƒ ì—ë„ˆì§€ ê´€ë ¨ ì˜ì•ˆ(39ê±´, 4ë²ˆ)ê³¼ ê¸°í›„ë³€í™”ì— ë”°ë¥¸ ë†ì–´ì—… ë¶€ì§„ì— ëŒ€í•œ ëŒ€ì±…(26ê±´, 13ë²ˆ)ì„ ë‹¤ë£¬ ì˜ì•ˆ ìˆ˜ë„ ì¦ê°€í–ˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, í›„ìì˜ í† í”½ì€ ì•ì„  ì±•í„°ì—ì„œ ë‹¤ë£¬ í™©ì£¼í™ ì˜ì›(ì „ë‚¨Â ê³ í¥êµ°ë³´ì„±êµ°ì¥í¥êµ°ê°•ì§„êµ°)ì´ 19ê±´ ë°œì˜í–ˆë‹¤ëŠ” ì ì„ ê³ ë ¤í•´ì•¼í•©ë‹ˆë‹¤. 
  ''')



if a == '3. íšŒì˜ë¡ ë¶„ì„':
  st.header('3. íšŒì˜ë¡ ë¶„ì„')
  st.subheader("ì •ê¶Œë³„ë¡œ ê¸°í›„ ë³€í™” ê´€ë ¨ **í‚¤ì›Œë“œ**ëŠ” ì–´ë–»ê²Œ ë‹¬ë¼ì§ˆê¹Œ?")
  st.markdown("ë¶„ì„ ê²°ê³¼ ì •ê¶Œë³„ í‚¤ì›Œë“œëŠ” í¬ê²Œ ê¸°í›„ë³€í™” í˜¹ì€ ëŒ€ì‘ê³¼ ê°™ì€ ë‹¨ìˆœ ê´€ë ¨ ë‹¨ì–´, ê¸°í›„ë³€í™”í˜‘ì•½ì´ë‚˜ íƒ„ì†Œë°°ì¶œê¶Œê³¼ ê°™ì´ **êµ­ì œ ì‚¬íšŒ ì˜ì œ**ì™€ ê´€ë ¨ëœ ë¶„ë¥˜, ë…¹ìƒ‰ì„±ì¥ì´ë‚˜ íƒ„ì†Œì¤‘ë¦½ê³¼ ê°™ì´ **ì •ë¶€ ì°¨ì›ì˜ ëŒ€ì‘ ì „ëµ**ì— ê´€ë ¨ëœ ë¶„ë¥˜ë¡œ ë‚˜ë‰˜ì—ˆìŠµë‹ˆë‹¤. ê° ì •ê¶Œë³„ë¡œ ë…¸ë¬´í˜„ ì •ê¶Œì—ì„œëŠ” **ê¸°í›„ë³€í™”í˜‘ì•½**, ì´ëª…ë°• ì •ê¶Œì—ì„œëŠ” **ë…¹ìƒ‰ì„±ì¥**, ë°•ê·¼í˜œ ì •ê¶Œì—ì„œëŠ” **íƒ„ì†Œë°°ì¶œê¶Œ**, ë¬¸ì¬ì¸ ì •ê¶Œì—ì„œëŠ” **íƒ„ì†Œì¤‘ë¦½**ì´ ì¤‘ìš”í•˜ê²Œ ì–¸ê¸‰ëë‹¤. ë‹¨ìˆœíˆ ëŒ€ì‘, ë³€í™”ê°€ í‚¤ì›Œë“œì¸ ë…¸ë¬´í˜„, ë°•ê·¼í˜œ ì •ë¶€ì— ë¹„í•´ ì´ëª…ë°•, ë¬¸ì¬ì¸ ì •ë¶€ì—ì„œ íŠ¹ì§•ì ì¸ í‚¤ì›Œë“œê°€ ë” ë§ì´ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤.")
  multi_select = st.multiselect('ì •ê¶Œë³„ ê¸°í›„ ë³€í™” í‚¤ì›Œë“œ í™•ì¸í•˜ê¸°',
                              ['ë…¸ë¬´í˜„', 'ì´ëª…ë°•', 'ë°•ê·¼í˜œ', 'ë¬¸ì¬ì¸'],
                              default = ['ë…¸ë¬´í˜„', 'ì´ëª…ë°•', 'ë°•ê·¼í˜œ', 'ë¬¸ì¬ì¸'])
  col1,col2,col3,col4= st.columns(4)
  if 'ë…¸ë¬´í˜„' in multi_select:
    col1.image(wc1, caption = 'ë…¸ë¬´í˜„ ì •ê¶Œ íšŒì˜ë¡')
  if 'ì´ëª…ë°•' in multi_select:
    col2.image(wc2, caption = 'ì´ëª…ë°• ì •ê¶Œ íšŒì˜ë¡')
  if 'ë°•ê·¼í˜œ' in multi_select:
    col3.image(wc3, caption = 'ë°•ê·¼í˜œ ì •ê¶Œ íšŒì˜ë¡')
  if 'ë¬¸ì¬ì¸' in multi_select:
    col4.image(wc4, caption = 'ë¬¸ì¬ì¸ ì •ê¶Œ íšŒì˜ë¡')

  ##### íšŒì˜ë¡ í´ëŸ¬ìŠ¤í„°

  st.subheader("í´ëŸ¬ìŠ¤í„° ì œëª©ì…ë‹ˆë‹¤")
  st.markdown("ì„¤ëª…ì´ ë“¤ì–´ê°ˆ ìë¦¬")
  # scatter plot
  fig = px.scatter(clstr, x =  "x" , y = "y", color="labels", hover_data=["labels","doc"], 
                  opacity=0.5,
                  width=800,height=600)
  fig.update_traces(marker_size=5)
  fig.update_layout(
      hovermode="closest",
                    hoverlabel=dict(bgcolor="white", font_size=10))
  st.plotly_chart(fig, use_container_width=True)


  ##### íˆíŠ¸ë§µ
  st.subheader("íˆíŠ¸ë§µ ì œëª©ì…ë‹ˆë‹¤")
  st.markdown("ì„¤ëª… ë“¤ì–´ê°ˆ ìë¦¬")
  # ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
  pres = np.load('./data/cos_pres_arr.npy', allow_pickle=True)
  politic = np.load('./data/cos_politic_arr.npy', allow_pickle=True)
  # ì •ê¶Œë³„
  president = ['ë…¸ë¬´í˜„','ì´ëª…ë°•','ë°•ê·¼í˜œ','ë¬¸ì¬ì¸']
  topic_list = ['í† í”½ 0','í† í”½ 1','í† í”½ 2','í† í”½ 3','í† í”½ 4','í† í”½ 5','í† í”½ 6','í† í”½ 7','í† í”½ 8','í† í”½ 9','í† í”½ 10','í† í”½ 11','í† í”½ 12','í† í”½ 13','í† í”½ 14']
  trace = go.Heatmap(
    x = president,
    y = topic_list,
    z = pres,
    type = 'heatmap'
  )
  data= [trace]
  fig2 = go.Figure(data = data)
  st.plotly_chart(fig2, use_container_width=True)

  # ì •ë‹¹ë³„
  st.markdown("ì„¤ëª… ë“¤ì–´ê°ˆ ìë¦¬")

  party = ['ë³´ìˆ˜','ì§„ë³´','ê¸°íƒ€']
  topic_list = ['í† í”½ 0','í† í”½ 1','í† í”½ 2','í† í”½ 3','í† í”½ 4','í† í”½ 5','í† í”½ 6','í† í”½ 7','í† í”½ 8','í† í”½ 9','í† í”½ 10','í† í”½ 11','í† í”½ 12','í† í”½ 13','í† í”½ 14']
  trace = go.Heatmap(
    x = party,
    y = topic_list,
    z = politic,
    type = 'heatmap'
  )
  data= [trace]
  fig3 = go.Figure(data = data)
  st.plotly_chart(fig3, use_container_width=True)



  # ê·¸ëƒ¥ ë²„íŠ¼ ë§Œë“¤ì–´ë³´ê³  ì‹¶ì–´ì„œ ë„£ì€... íšŒì˜ë¡ ë°ì´í„°ì…‹ ë³´ê¸°... ì§€ì›Œë„ë©ë‹ˆë‹¤...
  st.write("**[ë°ì´í„°ì…‹]**")
  if st.button("íšŒì˜ë¡ ë°ì´í„° í™•ì¸í•˜ê¸°"):
        st.info(
          """
          ì¶œì²˜: <êµ­íšŒíšŒì˜ë¡ ë¹…ë°ì´í„°> (https://dataset.nanet.go.kr/)
          """)
        st.dataframe(df.head(5))